extends ../layout

block content
    include ../util/navbar
    include ../util/sidebar

    main(id="main" class="main")

        div(class="pagetitle mb-4")
            h1= `Inventory Detail | ${detailInventory.name}`
            -const day = detailInventory.date.getDate();
            -const month = detailInventory.date.getMonth() + 1;
            -const year = detailInventory.date.getFullYear();
            -const formattedMonth = String(month).padStart(2, '0');
            -const formattedDay = String(day).padStart(2, '0');
            -const formattedDate = `${year}-${formattedMonth}-${formattedDay}`;              
                                        
        
        section(class="section profile")
            div(class="row")
             
                div(class="col-xl-4")

                    div(class="card")
                        div(class="card-body profile-card pt-4 d-flex flex-column align-items-center")
                            - var badgeClass = '';
                            - if (detailInventory.status === 'Active') {
                                - badgeClass = 'bg-success';
                            - } else if (detailInventory.status === 'Pending') {
                                - badgeClass = 'bg-warning';
                            - } else if (detailInventory.status === 'Damaged') {
                                - badgeClass = 'bg-danger';
                            - }
                            img(src=`/images/inventory_upload/${detailInventory.image}` class="rounded-2" alt="inventory")
                            h2= detailInventory.name
                            h3= detailInventory.serail_number
                            div.col-lg-9.col-md-8.badge(class=badgeClass)= detailInventory.status

                div(class="col-xl-8")
                    div(class="card")
                        div(class="card-body pt-3")

                            ul(class="nav nav-tabs nav-tabs-bordered")
                                li(class="nav-item")
                                    button(class="nav-link active" data-bs-toggle="tab" data-bs-target="#profile-overview") 
                                        | Overview
                                li(class="nav-item")
                                    button(class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-edit") 
                                        | Edit Inventory

                            div(class="tab-content pt-2")

                                div(class="tab-pane fade show active profile-overview" id="profile-overview")
                                    h5(class="card-title") Inventory Detail

                                    div(class="row")
                                        div(class="col-lg-3 col-md-4 label") 
                                            h6 Equiment Name
                                        div(class="col-lg-9 col-md-8")= detailInventory.name
                                    
                                    div(class="row mt-3")
                                        div(class="col-lg-3 col-md-4 label") 
                                            h6 Equiment Model
                                        div(class="col-lg-9 col-md-8")= detailInventory.model

                                    div(class="row mt-3")
                                        div(class="col-lg-3 col-md-4 label") 
                                            h6 Serial number
                                        div(class="col-lg-9 col-md-8")= detailInventory.serail_number

                                    div(class="row mt-3")
                                        div(class="col-lg-3 col-md-4 label") 
                                            h6 Type
                                        div(class="col-lg-9 col-md-8")= detailInventory.type

                                    div(class="row mt-3")
                                        div(class="col-lg-3 col-md-4 label") 
                                            h6 Actived Date
                                        div(class="col-lg-9 col-md-8")= day + "-" + formattedMonth + "-" +  year

                                    div(class="row mt-3")
                                        div(class="col-lg-3 col-md-4 label") 
                                            h6 Used Date
                                        div(class="col-lg-9 col-md-8")= daysPassed.toLocaleString() + " Days"

                                    if (detailInventory.cycle_use != null)
                                        div(class="row mt-3")
                                            div(class="col-lg-3 col-md-4 label") 
                                                h6 Cycle Use
                                            div(class="col-lg-9 col-md-8")= `${detailInventory.cycle_use} Times`


                                div(class="tab-pane fade profile-edit" id="profile-edit")
                                    h5(class="card-title") Update Inventory Detail
                                    //- form(action=`/inventory/${detailInventory.id}/update` method='POST')
                                    form(action=`/inventory/${detailInventory.id}/` method="POST" class="row needs-validation" novalidate)
                                    
                                        div(class="row")
                                            div(class="col-lg-3 col-md-4") 
                                                label(for="name" Class="form-label") Equiment Name 
                                            div(class="col-lg-9 col-md-8")
                                                input(name="name" type="text" value=`${detailInventory.name}` class="form-control" required)

                                        div(class="row mt-3")
                                            div(class="col-lg-3 col-md-4") 
                                                label(for="name" Class="form-label") Equiment Model
                                            div(class="col-lg-9 col-md-8")
                                                input(name="model" type="text" value=`${detailInventory.model}` class="form-control" required)

                                        div(class="row mt-3")
                                            div(class="col-lg-3 col-md-4") 
                                                label(for="name" Class="form-label") Serial number
                                            div(class="col-lg-9 col-md-8")
                                                input(name="serail_number" type="text" value=`${detailInventory.serail_number}` class="form-control" required)

                                        div(class="row mt-3")
                                            div(class="col-lg-3 col-md-4") 
                                                label(for="name" Class="form-label") Type
                                            div(class="col-lg-9 col-md-8")
                                                select(name="type" class="form-select" aria-label="Default select example" required)   
                                                    option(value="Drone" selected=detailInventory.type==="Drone") Drone 
                                                    option(value="Battery" selected=detailInventory.type==="Battery") Battery 
                                                    option(value="Sensor" selected=detailInventory.type==="Sensor") Sensor
                                                    option(value="Camera" selected=detailInventory.type==="Camera") Camera
                                                    option(value="Charger" selected=detailInventory.type==="Charger") Charger
                                                    option(value="Accessory" selected=detailInventory.type==="Accessory") Accessory
                                                    option(value="Orther" selected=detailInventory.type==="Orther") Other
                                        
                                        div(class="row mt-3")
                                            div(class="col-lg-3 col-md-4") 
                                                label(for="name" Class="form-label") Status
                                            div(class="col-lg-9 col-md-8")
                                                select(name="status" class="form-select" aria-label="Default select example" required)
                                                    option(value="Active" selected=detailInventory.status==="Active") Active
                                                    option(value="Pending" selected=detailInventory.status==="Pending") Pending
                                                    option(value="Damaged" selected=detailInventory.status==="Damaged") Damaged

                                        div(class="row mt-3")
                                            div(class="col-lg-3 col-md-4") 
                                                label(for="name" Class="form-label") Date
                                            div(class="col-lg-9 col-md-8")     
                                                input(name="date" type="date" class="form-control" value=`${formattedDate}` required)

                                                
                                                
                                        div(class="row mt-3")
                                            div(class="mt-4 col-lg-3 mx-auto")          
                                                button(type="submit" class="btn btn-primary") Update Data
                                            div(class="mt-4 col-lg-2 mx-auto")
                                                button(type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#basicModal") DELETE
                                                
                                    //-Model Popup
                                    div(class="modal fade" id="basicModal" tabindex="-1")
                                        div(class="modal-dialog")
                                            div(class="modal-content")
                                                div(class="modal-header")
                                                    h5(class="modal-title") Delete Data
                                                    button(type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close")
                                                div(class="modal-body")
                                                    form(action=`/inventory/${detailInventory.id}/delete` method='POST')
                                                        button(type='submit' class="btn btn-danger") Delete
                                                    

                                    

                                
                